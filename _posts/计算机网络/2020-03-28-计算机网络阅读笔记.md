---
layout: article
title: 计算机网络阅读笔记
date: 2020/3/28 23:01
categories: 计算机网络
tags: 计算机网络
root-path: ../..
---

# 计算机网络和因特网

## 什么是因特网

## 网络边缘

## 网络核心

### 分组交换

相关名词解释。

> - 报文：端系统彼此之间交换报文
> - 分组：从源端到目的端发送一个报文，源将长报文划分为小的数据块，称为分组
> - 分组交换机：源和目的之间，每个分组都通过通信链路和分组交换机（分为两类：路由器和链路层交换机）传送

1. 存储转发传输

   多数分组交换机在链路的输入端使用存储转发传输机制，存储转发机制是指在交换机能够开始向输出链路传输改分组的第一个比特之前，必须接收到整个分组。

   这个机制产生的问题就是时延。举例说明：

   > 如果发送一个L比特的分组，传输分组传输速率是R比特/秒，那么传输该分组的时间就为L/R秒，如果中间有N条速率均为R的链路组成的路径（即，源到目的端之间有N-1个路由器），此时端到端的时延就是N*（L/R）秒。

2. 排队时延和分组丢失

   - 输出缓存（输出队列）：对于每条相连的链路，分组交换机都具有一个输出缓存，用于存储路由器准备发往那条链路的分组。

   - 排队时延：如果到达的分组需要传输到某条链路的分组，但该分组正在忙于传输其他分组，该到达该分组必须在该缓存中等待，因此分组还需要承受输出缓存的排队延迟。

   - 分组丢失（丢包）：因为缓存空间有限，一个到达的分组可能发现该缓存已被其他等待传输的分组完全充满了，此情况下，将出现分组丢失（丢包），到达的分组或已经排队的分组之一将被丢弃。

3. 转发表和路由选择协议

   - 转发表：每台路由器具有一个转发表，用于将目的地址映射为输出链路。（当分组到达一台路有器时，路由器检查该地址，并用于这个目的地址搜索其转发表，以发现适当的出链路）（PS：Internet具有一些特殊的路由选择协议用于自动地设置这些转发表）

     

### 电路交换

通过网络链路和交换机移动数据有两种基本的方法：电路交换和分组交换。

> 在电路交换网络中，在端系统间的通信会话期间，预留了端系统间通信沿路径所需要的资源（缓存，链路传输速度）。
>
> 在分组交换资源中，这些资源不是预留的；会话的报文按需使用这些资源，其后果是不得不等待接入通信链路。

1. 电路交换网络中的复用

   链路中的电路是通过**频分复用**或**时分复用**来实现。

2. 分组交换和电路交换的对比

   - 分组交换提供比电路交换更好的带宽共享
   - 分组交换更简单，更高效
   - 分组交换对于实时服务不太友好，因为端到端时延是可变的和不可预测的，主要是因为排队时延的变动和不可预测所致

   因为分组交换更加高效，趋势是逐渐偏向分组交换。

### 网络的网络

现在Internet的网络的网络，其结构复杂，有十多个第一层ISP和数十个万个较低层ISP组成。ISP的覆盖区域有大有小。较低层的ISOP和较高层的ISP相连，较高层ISP彼此互联。近年来，主要的内容提供商也已经创建自己的网络，在某些可能的地方与较低层ISP互联。

## 分组交换网中的时延、丢包和吞吐量

Internet可以看作一种为运行在端系统上的分布式应用提供服务的基础设施。

### 分组交换网中的时延概述

分组从源出发，通过一系列路由器传输，在目的地结束它的历程。当一个分组在一个结点（主机或路由器）沿着这条路径到后继结点（主机或路由器），该分组在沿途的每个结点经受了几种不同类型的时延，结点时延主要包括：处理时延、排队时延、传输时延以及传播时延。

1. 处理时延

   检查分组首部和决定将该分组导向何处所需要的时间是处理时延的一部分。处理时延也包括其他因素，如检查比特级别的差错所需要的时间，该差错出现在上游结点向路由器A传输这些分组比特的过程中。

2. 排队时延

   在队列中，当分组在链路上等待传输的时，它经受排队时延。一个特定的分组的排队时延长度将取决于先期到达排队等待向链路传输的分组数量。

3. 传输时延

   是将所有分组的比特推（传输）向链路所需要的时间。实际的传输时延通常在毫秒到微妙量级。

4. 传播时延

   一旦一个比特被推向链路，该比特需要向路由器B传播，从该链路的起点到路由器B传播所需要的时间是传播时延。

   在广域网中，传播时延通常在毫秒量级。

5. 传输时延和传播时延的比较

   传输时延是路由器将分组推出所需要的时间，是分组长度和链路传输速率的函数，而与两台路由器之间的距离无关。

   传播时延是一个比特从一个路由器到另一台路由器所需要的时间，是两台路由器之间距离的函数，而与分组长度或链路传输速率无关。

### 排队时延和丢包

结点时延最为复杂的是排队时延。排队时延的大小很大程度取决于流量到达该队列的速率、链路的传输速率和到达流量的性质，即流量是周期性到达还是以突发形式到达。

- 流量强度

  a表示分组到达队列的平均速率（单位为：分组/秒，即pkt/s）

  R为传输速率，即从队列中推出比特的速率（单位为：b/s）

  假定所有分组都是由L比特组成的，则比特到达队列的平均速率为`La` b/s。

  比率 `La/R` 为流量强度，在估计排队时延范围方面经常有非常重要的作用。如`La/R > 1`则说明比特到达哦队列的平均速率超过了该队列传输出去的速率。显然，这个流量强度在设计中不能大于1。

  （在上述的讨论中，假定该队列非常大，因此能够基本容纳无限数量的比特）

有一个重要的事实就是：对着流量强度接近于1，平均排队时延迅速增加。该强度少量的增加将导致时延大得多的增加。

1. 丢包

在现实中，一条链路前的队列只有有限的容量，尽管排队容量极大地依赖于路由器的设计和成本。

因为排队容量有限，因此流量强度接近于1，排队时延并不实际趋向无穷大，相反，到达分组将发现一个满的队列，由于没有地方存储这个分组，路由器将丢弃该分组，即该分组将丢失。

丢失的分组可能基于端到端的原则重传，以确保所有的数据最终从源发送到了目的地。

### 端到端时延

1. Traceroute

   Traceroute是一个简单的程序，当用户指定一个目的主机名字时，源主机中的该程序朝着该目的地发送多个特殊的分组，当这些分组向着这些目的地传送时，它们通过一系列路由器。当路由器接收到这些特殊分组时，它向源会送一个短报文，该报文包括路由器名字和地址。

   traceroute通过发送小的数据包到目的设备直到其返回，来测量其需要多长时间。一条路径上的每个设备traceroute要测3次。输出结果中包括每次测试的时间(ms)和设备的名称（如有的话）及其IP地址（traceroute 一台主机时，会看到有一些行是以星号表示的。出现这样的情况，可能是防火墙封掉了ICMP的返回信息，所以我们得不到什么相关的数据包返回数据）。

2. 端系统、应用程序和其他时延

   除了处理时延、传输时延和传播时延，端系统中还有一些其他重要的时延。例如，作为协议的一部分，希望向共享媒体（如，在WiFi或电缆调制解调器情况下）传输分组的端系统可以有意地延迟它的传输以与其他端系统共享媒体。另外一个重要的时延是媒体分组化时延，这种时延出现在经IP语音（VoIP）应用中。

### 计算机网络中的吞吐量

- 瞬时吞吐量：在任意时间瞬间，主机接收到该文件的速率。
- 平均吞吐量：主机接收到一个文件所有的F比特，花费了T秒，则文件传送的平均吞吐量是 `F/T`bps

吞吐量不仅取决于沿着路径的的传输速率，而且取决于干扰流量。特别是，如果许多其他的数据流也通过这条链路流动，一条具有高传输速率的链路仍然可能成为文件传输的瓶颈链路。

## 协议层及其服务模型

### 分层的体系结构

1. 协议分层

   为了给网络协议的设计提供一个结构，网络设计者以分层的方式组织协议以及实现这些协议的网络硬件和软件。每个协议属于这些层次之一，我们关注某层向它的上一层提供的服务，即所谓一层的服务模型。

   一个协议层能够用软件、硬件或两者的结合来实现。

   Internet的协议栈由5个层次组成：物理层、链路层、网络层、运输层和应用层。

   - 应用层

     应用层是网络应用程序及它们的应用层协议存留的地方。

     应用层协议分布在多个端系统上，一个端系统中的应用程序使用协议与另一端系统中的应用程序交换信息的分组。

     位于应用层的信息分组称为**报文**。

   - 运输层

     运输层在应用程序端点之间传送应用层报文。在Internel中，有两个运输协议，即TCP和UDP。

     运输层的分组称为**报文段**。

   - 网络层

     网络层负责将**数据报**的网络层分组从一台主机移动到另一台主机。例如，IP协议。

   - 链路层

     为了将分组从一个结点移动到路径的下一个结点，网络层必须依靠该链路层的服务。特别是在每个结点，网络层将数据报下传给链路层，链路层沿着路径将数据报传递给下一个结点，在下个结点，链路层将数据报上传给网络层。

     链路层的分组称为**帧**。

   - 物理层

     物理层的任务将该帧中的一个一个比特从一个结点移动到下一个结点。

2. OSI模型

   OSI参考模型是7层：应用层、表示层、会话层、运输层、网络层、数据链路层和物理层。

### 封装



## 面对攻击的网络

## 计算机网络和因特网的历史



# 应用层









